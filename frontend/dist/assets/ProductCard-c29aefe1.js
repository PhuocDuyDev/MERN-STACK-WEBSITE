import{n as R,C as m,o as O,p as Q,G as M,r as f,R as J,a as l,F as W,j as e,q as r,c as L,t as j,v as G,u as U,w as V,x as i,L as K,P as X}from"./index-e09b3632.js";import{a as B,n as v,b as _}from"./toast-1c021ce3.js";import{m as Y,p as Z}from"./plus-9f102ee5.js";import{S as tt,M as et}from"./SliderImages-5145811e.js";const at=s=>o=>{s(o)},pt=(s,o)=>{const c=[...o];return s.id===R.ASC.id?c.sort((t,y)=>y.price-t.price):s.id===R.DESC.id?c.sort((t,y)=>t.price-y.price):c},st=s=>o=>{s(o)},mt=(s,o)=>{const c=[...o];switch(s.id){case m.DRESS.id:return c.filter(t=>t.category===m.DRESS.id);case m.FEATURE.id:return c.filter(t=>t.feature===!0);case m.JEAN.id:return c.filter(t=>t.category===m.JEAN.id);case m.JACKET.id:return c.filter(t=>t.category===m.JACKET.id);case m.SAND.id:return c.filter(t=>t.category===m.SAND.id);case m.TSHIRT.id:return c.filter(t=>t.category===m.TSHIRT.id);case m.SALE.id:return c.filter(t=>t.discount>0);default:return c}},ht={setSortFilter:at(O),setCategoryFilter:st(Q)};function rt(s){return M({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.133 13.133 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.133 13.133 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5c-2.12 0-3.879-1.168-5.168-2.457A13.134 13.134 0 0 1 1.172 8z"}},{tag:"path",attr:{d:"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z"}}]})(s)}function it(s){return M({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M4 1c2.21 0 4 1.755 4 3.92C8 2.755 9.79 1 12 1s4 1.755 4 3.92c0 3.263-3.234 4.414-7.608 9.608a.513.513 0 0 1-.784 0C3.234 9.334 0 8.183 0 4.92 0 2.755 1.79 1 4 1z"}}]})(s)}function ct(s){return M({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"m8 6.236-.894-1.789c-.222-.443-.607-1.08-1.152-1.595C5.418 2.345 4.776 2 4 2 2.324 2 1 3.326 1 4.92c0 1.211.554 2.066 1.868 3.37.337.334.721.695 1.146 1.093C5.122 10.423 6.5 11.717 8 13.447c1.5-1.73 2.878-3.024 3.986-4.064.425-.398.81-.76 1.146-1.093C14.446 6.986 15 6.131 15 4.92 15 3.326 13.676 2 12 2c-.777 0-1.418.345-1.954.852-.545.515-.93 1.152-1.152 1.595L8 6.236zm.392 8.292a.513.513 0 0 1-.784 0c-1.601-1.902-3.05-3.262-4.243-4.381C1.3 8.208 0 6.989 0 4.92 0 2.755 1.79 1 4 1c1.6 0 2.719 1.05 3.404 2.008.26.365.458.716.596.992a7.55 7.55 0 0 1 .596-.992C9.281 2.049 10.4 1 12 1c2.21 0 4 1.755 4 3.92 0 2.069-1.3 3.288-3.365 5.227-1.193 1.12-2.642 2.48-4.243 4.38z"}}]})(s)}const nt=({open:s,onClose:o,addCart:c,...t})=>{if(!s)return null;const{id:y,productImg:A,price:N,category:$,name:z,description:w,discount:S,isInCart:x,isInWishlist:H,size:{items:b}}=t,[h,d]=f.useState(1),[C,k]=f.useState("S"),[p,q]=f.useState(b.filter(({size:a})=>a===C)[0].quantity),D=async a=>{await c(a,{productId:y,quantity:h,size:C,isEditQuantity:!1})},E=Math.round(N-N*S/100),F=f.useCallback(a=>{k(a);const[T]=b.filter(({size:I})=>I===a);T.quantity===0?d(0):d(1),q(T.quantity)},[]),u=f.useCallback(a=>{a.target.value>p?d(p):d(a.target.value)},[]),g=f.useCallback(()=>{h<=1?d(1):d(a=>a-1)},[]),n=f.useCallback(()=>{h>=p?d(p):d(a=>a+1)},[]);return J.createPortal(l(W,{children:[e("div",{className:r.overlay,onClick:o}),e("div",{className:`container ${r["modal-add-to-cart"]}`,onClick:a=>{a.stopPropagation()},children:l("div",{className:`${r["modal-container"]}`,children:[e("button",{onClick:o,className:r["btn-close"],children:"X"}),e(tt,{productImg:A,productName:z}),l("div",{className:r["product-details"],children:[e("h3",{className:r["product-details-title"],children:z}),l("div",{className:r["product-details-price"],children:[S>0?l("span",{className:r["product-details-price-sale"],children:["$",E]}):null,l("span",{className:`${r["product-details-price-original"]} ${S?null:r["not-sale"]}`,children:["$",N]})]}),l("div",{className:r["product-details-size"],children:[e("p",{className:r["size-quantity"],children:p>0?l(W,{children:[e("span",{children:p})," in stock"]}):e("span",{children:"Out of stocks"})}),e("div",{className:r["size-list"],children:b.map(({size:a})=>e("button",{onClick:()=>F(a),className:`${r["btn-size"]} ${a===C?r.active:null}`,children:a},a))})]}),l("div",{className:r["product-details-quantity"],children:[e("button",{className:r["btn-quantity"],onClick:g,disabled:p<=1||h<=1,children:e("img",{src:Y,alt:"minus icon"})}),e("input",{type:"tel",className:r["product-details-quantity-input"],value:h>=p?p:h,onChange:u}),e("button",{className:r["btn-quantity"],onClick:n,disabled:h>=p,children:e("img",{src:Z,alt:"plus icon"})})]}),e("button",{onClick:D,className:r["btn-add-to-cart"],children:"ADD TO CART"})]})]})})]}),document.getElementById("portal"))},ft=({price:s,discount:o,productImg:c,id:t,name:y,category:A,isInCart:N,isInWishlist:$,description:z,size:w})=>{const S=Math.round(s-s*o/100),{mutate:x}=L(),{mutate:H}=j(),{mutate:b}=G(),[h,d]=f.useState($),{setCurrentUser:C}=U();V();const[k,p]=f.useState(!1),q=async(u,g)=>{u.preventDefault();try{const n=await H({variables:{productId:g}});C(n.data.addProductToWishlist),B("Added success product to wishlist!"),d(!0)}catch(n){return v(n.message),n.extensions.http.status===409?d(!0):(d(!1),v("Please login to use this feature!")),n}},D=async(u,g)=>{u.preventDefault();try{const n=await b({variables:{productId:g}});if(n.errors)throw Error(n.errors.message);C(n.data.removeProductFromWishlist),_("Remove product from wishlist success!"),d(!1)}catch(n){return v(n.message),n.extensions.http.status===409?d(!1):n.extensions.http.status===401?(d(!1),v("Please login to use this feature!")):d(!0),n}},E=u=>{u.preventDefault(),p(!0)},F=async(u,g)=>{u.preventDefault();const{productId:n,quantity:a,size:T,isEditQuantity:I}=g;try{const P=await x({variables:{inputProduct:{productId:n,quantity:+a,size:T,isEditQuantity:I}}});C(P.data.addToCart),B("Added success product to cart!")}catch(P){if(P.extensions.http.status===401){v("Please login to use this feature!");return}v(P.message)}};return l("div",{className:i["product-container"],children:[l(K,{to:`${X}/${t}`,className:`${i["product-card"]}`,children:[l("div",{className:i["product-img"],children:[e("img",{src:c[0],alt:"product images front",className:i["img-lazy"]}),e(et,{src:c[1],alt:"product images back",classnames:i["img-lazy"]})]}),l("div",{className:i["product-details"],children:[e("p",{className:i["product-details-tag"],children:A}),e("h4",{className:i["product-details-title"],children:y}),l("div",{className:i["product-details-price"],children:[o>0?l("span",{className:i["product-details-price-sale"],children:["$",S]}):null,l("span",{className:`${i["product-details-price-original"]} ${o?null:i["not-sale"]}`,children:["$",s]})]})]}),l("div",{className:i["product-card-actions"],children:[e("button",{className:i["action-btn"],onClick:E,children:e(rt,{className:i["action-icon"]})}),e(nt,{open:k,onClose:u=>{u.preventDefault(),p(!1)},addCart:F,price:s,discount:o,productImg:c,id:t,name:y,category:A,description:z,isInCart:N,isInWishlist:$,size:w},t)]}),e("button",{"data-product-id":t,className:`${i["product-card-favourite"]}`,children:h?e(it,{className:`${i["favourite-icon"]} ${i.active}`,onClick:u=>D(u,t)}):e(ct,{className:i["favourite-icon"],onClick:u=>q(u,t)})})]}),o&&l("div",{className:i["product-card-badget"],children:["-",o,"%"]})]})};export{ft as P,pt as a,mt as b,ht as f};
