import{u as j,r as s,Z as B,t as T,j as e,b as n,L as G,_ as R}from"./index-26733e41.js";import{v as r}from"./index-69ff641d.js";import{a as D}from"./toast-99f67b36.js";const O="_option_1l5qk_161",t={"register-page":"_register-page_1l5qk_1","form-input":"_form-input_1l5qk_89","error-server":"_error-server_1l5qk_135","success-server":"_success-server_1l5qk_147",option:O},z=()=>{const{isAuthenticated:d}=j(),[i,v]=s.useState(""),[o,f]=s.useState(""),[u,E]=s.useState(""),{mutate:_,error:m,loading:c,data:l}=B(),[p,w]=s.useState(null),[g,h]=s.useState(null),[N,y]=s.useState(null),[S,b]=s.useState(null),[P,I]=s.useState(null),[L,V]=s.useState(!1),C=T();s.useEffect(()=>{d&&(D("You must logout before register!"),C("/products")),l&&!m&&(w(l==null?void 0:l.register.message),h(null)),m&&h(m.message)},[m,l,d]),s.useEffect(()=>{const a=setTimeout(()=>{V(r.isLength(i.trim(),{min:3})&&r.isEmail(o)&&r.isLength(u.trim(),{min:6}))},300);return()=>{clearTimeout(a)}});const k=a=>{a.preventDefault(),_({variables:{name:i,email:o,password:u}})},x=a=>{v(a.target.value)},F=a=>{f(a.target.value)},H=a=>{E(a.target.value)},M=()=>{y(r.isLength(i.trim(),{min:3}))},q=()=>{b(r.isEmail(o))},A=()=>{I(r.isLength(u.trim(),{min:6}))};return e("div",{className:t["register-page"],children:n("form",{method:"post",className:t.form,onSubmit:k,children:[n("div",{className:t["form-input"],children:[e("label",{htmlFor:"inputName",children:"Fullname: "}),e("input",{id:"inputName",type:"text",value:i,name:"name",onChange:x,onBlur:M,placeholder:"Enter your fullname..."}),N===!1?e("span",{children:"Fullname is invalid. Please try again!"}):null]}),n("div",{className:t["form-input"],children:[e("label",{htmlFor:"inputEmail",children:"Email: "}),e("input",{id:"inputEmail",type:"email",value:o,name:"email",onChange:F,onBlur:q,placeholder:"Enter your email..."}),S===!1?e("span",{children:"Email is invalid. Please try again!"}):null]}),n("div",{className:t["form-input"],children:[e("label",{htmlFor:"inputPassword",children:"Password: "}),e("input",{id:"inputPassword",type:"password",value:u,name:"password",onChange:H,onBlur:A,placeholder:"Enter your password..."}),P===!1?e("span",{children:"Password is invalid. Please try again!"}):null]}),g?e("span",{className:t["error-server"],children:g}):p?n("span",{className:t["success-server"],children:[p,"! Login now!"]}):null,n("div",{className:t.option,children:[e("p",{children:"Already have an account?"}),e(G,{to:R,children:"Login now!"})]}),e("button",{disabled:!L||c,type:"submit",children:c?"Try register":"Submit"})]})})};export{z as default};
