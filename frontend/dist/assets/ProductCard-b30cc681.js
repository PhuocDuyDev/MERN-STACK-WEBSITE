import{l as W,C as m,s as Q,m as J,G as w,r as h,R as L,b as n,F as M,j as e,n as r,a as j,o as G,q as U,u as V,t as K,v as i,L as X,P as _}from"./index-26733e41.js";import{n as B,a as A,b as Y}from"./toast-99f67b36.js";import{m as Z,p as tt}from"./plus-9f102ee5.js";import{S as et,M as at}from"./SliderImages-acb35d68.js";const st=s=>l=>{s(l)},pt=(s,l)=>{const c=[...l];return s.id===W.ASC.id?c.sort((a,f)=>f.price-a.price):s.id===W.DESC.id?c.sort((a,f)=>a.price-f.price):c},rt=s=>l=>{s(l)},ht=(s,l)=>{const c=[...l];switch(s.id){case m.DRESS.id:return c.filter(a=>a.category===m.DRESS.id);case m.FEATURE.id:return c.filter(a=>a.feature===!0);case m.JEAN.id:return c.filter(a=>a.category===m.JEAN.id);case m.JACKET.id:return c.filter(a=>a.category===m.JACKET.id);case m.SAND.id:return c.filter(a=>a.category===m.SAND.id);case m.TSHIRT.id:return c.filter(a=>a.category===m.TSHIRT.id);case m.SALE.id:return c.filter(a=>a.discount>0);default:return c}},ft={setSortFilter:st(Q),setCategoryFilter:rt(J)};function it(s){return w({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.133 13.133 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.133 13.133 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5c-2.12 0-3.879-1.168-5.168-2.457A13.134 13.134 0 0 1 1.172 8z"}},{tag:"path",attr:{d:"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z"}}]})(s)}function ct(s){return w({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M4 1c2.21 0 4 1.755 4 3.92C8 2.755 9.79 1 12 1s4 1.755 4 3.92c0 3.263-3.234 4.414-7.608 9.608a.513.513 0 0 1-.784 0C3.234 9.334 0 8.183 0 4.92 0 2.755 1.79 1 4 1z"}}]})(s)}function nt(s){return w({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"m8 6.236-.894-1.789c-.222-.443-.607-1.08-1.152-1.595C5.418 2.345 4.776 2 4 2 2.324 2 1 3.326 1 4.92c0 1.211.554 2.066 1.868 3.37.337.334.721.695 1.146 1.093C5.122 10.423 6.5 11.717 8 13.447c1.5-1.73 2.878-3.024 3.986-4.064.425-.398.81-.76 1.146-1.093C14.446 6.986 15 6.131 15 4.92 15 3.326 13.676 2 12 2c-.777 0-1.418.345-1.954.852-.545.515-.93 1.152-1.152 1.595L8 6.236zm.392 8.292a.513.513 0 0 1-.784 0c-1.601-1.902-3.05-3.262-4.243-4.381C1.3 8.208 0 6.989 0 4.92 0 2.755 1.79 1 4 1c1.6 0 2.719 1.05 3.404 2.008.26.365.458.716.596.992a7.55 7.55 0 0 1 .596-.992C9.281 2.049 10.4 1 12 1c2.21 0 4 1.755 4 3.92 0 2.069-1.3 3.288-3.365 5.227-1.193 1.12-2.642 2.48-4.243 4.38z"}}]})(s)}const lt=({open:s,onClose:l,addCart:c,...a})=>{if(!s)return null;const{id:f,productImg:T,price:N,category:k,name:z,description:x,discount:C,isInCart:H,isInWishlist:R,size:{items:S}}=a,[p,o]=h.useState(1),[g,b]=h.useState("S"),[u,P]=h.useState(S.filter(({size:t})=>t===g)[0].quantity),q=async t=>{await c(t,{productId:f,quantity:p,size:g,isEditQuantity:!1})},D=Math.round(N-N*C/100),E=h.useCallback(t=>{b(t);const[$]=S.filter(({size:I})=>I===t);$.quantity===0?o(0):o(1),P($.quantity)},[]),F=h.useCallback(t=>{t.target.value>u?o(u):o(t.target.value)},[]),d=h.useCallback(()=>{p<=1?o(1):o(t=>t-1)},[]),y=h.useCallback(()=>{p>=u?o(u):o(t=>t+1)},[]);return L.createPortal(n(M,{children:[e("div",{className:r.overlay,onClick:l}),e("div",{className:`container ${r["modal-add-to-cart"]}`,onClick:t=>{t.stopPropagation()},children:n("div",{className:`${r["modal-container"]}`,children:[e("button",{onClick:l,className:r["btn-close"],children:"X"}),e(et,{productImg:T,productName:z}),n("div",{className:r["product-details"],children:[e("h3",{className:r["product-details-title"],children:z}),n("div",{className:r["product-details-price"],children:[C>0?n("span",{className:r["product-details-price-sale"],children:["Price: $",D]}):null,n("span",{className:`${r["product-details-price-original"]} ${C?null:r["not-sale"]}`,children:[C?null:e(M,{children:"Price: "}),"$",N]})]}),n("div",{className:r["product-details-size"],children:[e("p",{className:r["size-quantity"],children:u>0?n(M,{children:[e("span",{children:u})," in stock"]}):e("span",{children:"Out of stocks"})}),e("div",{className:r["size-list"],children:S.map(({size:t})=>e("button",{onClick:()=>E(t),className:`${r["btn-size"]} ${t===g?r.active:null}`,children:t},t))})]}),n("div",{className:r["product-details-quantity"],children:[e("button",{className:r["btn-quantity"],onClick:d,disabled:u<=1||p<=1,children:e("img",{src:Z,alt:"minus icon"})}),e("input",{type:"tel",className:r["product-details-quantity-input"],value:p>=u?u:p,onChange:F}),e("button",{className:r["btn-quantity"],onClick:y,disabled:p>=u,children:e("img",{src:tt,alt:"plus icon"})})]}),e("button",{onClick:q,className:r["btn-add-to-cart"],children:"ADD TO CART"})]})]})})]}),document.getElementById("portal"))},gt=({price:s,discount:l,productImg:c,id:a,name:f,category:T,isInCart:N,isInWishlist:k,description:z,size:x})=>{const C=Math.round(s-s*l/100),{mutate:H}=j(),{mutate:R}=G(),{mutate:S}=U(),[p,o]=h.useState(k),{setCurrentUser:g}=V(),b=K(),[u,P]=h.useState(!1),q=async(d,y)=>{d.preventDefault();try{const t=await R({variables:{productId:y}});g(t.data.addProductToWishlist),B("Added success product to wishlist!"),o(!0)}catch(t){return t.extensions.http.status===409?o(!0):(o(!1),setTimeout(()=>b("/login"),500),A("Please login to use this feature!")),A(t.message),t}},D=async(d,y)=>{d.preventDefault();try{const t=await S({variables:{productId:y}});if(t.errors)throw Error(t.errors.message);g(t.data.removeProductFromWishlist),Y("Remove product from wishlist success!"),o(!1)}catch(t){return t.extensions.http.status===409?o(!1):t.extensions.http.status===401?(o(!1),setTimeout(()=>b("/login"),500),A("Please login to use this feature!")):o(!0),A(t.message),t}},E=d=>{d.preventDefault(),P(!0)},F=async(d,y)=>{d.preventDefault();const{productId:t,quantity:$,size:I,isEditQuantity:O}=y;try{const v=await H({variables:{inputProduct:{productId:t,quantity:+$,size:I,isEditQuantity:O}}});g(v.data.addToCart),B("Added success product to cart!")}catch(v){return console.log(v),v.extensions.http.status===401&&setTimeout(()=>b("/login"),500),A(v.message),v}};return n("div",{className:i["product-container"],children:[n(X,{to:`${_}/${a}`,className:`${i["product-card"]}`,children:[n("div",{className:i["product-img"],children:[e("img",{src:c[0],alt:"product images front",className:i["img-lazy"]}),e(at,{src:c[1],alt:"product images back",classnames:i["img-lazy"]})]}),n("div",{className:i["product-details"],children:[e("p",{className:i["product-details-tag"],children:T}),e("h4",{className:i["product-details-title"],children:f}),n("div",{className:i["product-details-price"],children:[l>0?n("span",{className:i["product-details-price-sale"],children:["$",C]}):null,n("span",{className:`${i["product-details-price-original"]} ${l?null:i["not-sale"]}`,children:["$",s]})]})]}),n("div",{className:i["product-card-actions"],children:[e("button",{className:i["action-btn"],onClick:E,children:e(it,{className:i["action-icon"]})}),e(lt,{open:u,onClose:d=>{d.preventDefault(),P(!1)},addCart:F,price:s,discount:l,productImg:c,id:a,name:f,category:T,description:z,isInCart:N,isInWishlist:k,size:x},a)]}),e("button",{"data-product-id":a,className:`${i["product-card-favourite"]}`,children:p?e(ct,{className:`${i["favourite-icon"]} ${i.active}`,onClick:d=>D(d,a)}):e(nt,{className:i["favourite-icon"],onClick:d=>q(d,a)})})]}),l&&n("div",{className:i["product-card-badget"],children:["-",l,"%"]})]})};export{gt as P,pt as a,ht as b,ft as f};
